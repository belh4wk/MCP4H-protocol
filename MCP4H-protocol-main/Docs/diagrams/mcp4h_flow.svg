<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1280" height="720" viewBox="0 0 1280 720" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="cardGrad" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#ffffff" stop-opacity="1"/>
      <stop offset="100%" stop-color="#f4f7fb" stop-opacity="1"/>
    </linearGradient>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="6" flood-color="#2b2b2b" flood-opacity="0.15"/>
    </filter>
    <style>
      .title { font: 700 28px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; fill: #0f172a; }
      .subtitle { font: 500 18px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; fill: #334155; }
      .label { font: 600 16px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; fill: #0f172a; }
      .small { font: 400 14px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; fill: #475569; }
      .group { fill: url(#cardGrad); stroke: #e5e7eb; stroke-width: 1; rx: 16; filter: url(#softShadow); }
      .node { fill: #ffffff; stroke: #e5e7eb; stroke-width: 1; rx: 12; }
      .arrow { stroke: #64748b; stroke-width: 2.5; marker-end: url(#arrowHead); fill: none; }
    </style>
    <marker id="arrowHead" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="40" y="56" class="title">MCP4H — Human↔Machine Multimodal Protocol (Flow)</text>
  <text x="40" y="86" class="subtitle">Normalize → Schema → Confidence → Time-sync → Route</text>

  <!-- Left group: Inputs -->
  <rect x="40" y="120" width="360" height="520" class="group"/>
  <text x="60" y="150" class="label">Inputs</text>
  <text x="60" y="175" class="small">Games/Sim telemetry, Human signals</text>

  <!-- Input nodes -->
  <rect x="60" y="200" width="320" height="64" class="node"/>
  <text x="80" y="238" class="label">Game / Sim Telemetry</text>
  <text x="80" y="262" class="small">speed, rpm, gear, slip, flags…</text>

  <rect x="60" y="290" width="320" height="64" class="node"/>
  <text x="80" y="328" class="label">Human Controls</text>
  <text x="80" y="352" class="small">wheel, pedals, buttons, encoders</text>

  <rect x="60" y="380" width="320" height="64" class="node"/>
  <text x="80" y="418" class="label">Voice / Gaze</text>
  <text x="80" y="442" class="small">commands, fixation, intents</text>

  <rect x="60" y="470" width="320" height="64" class="node"/>
  <text x="80" y="508" class="label">Biometrics</text>
  <text x="80" y="532" class="small">HRV, EDA, temp, fatigue</text>

  <!-- Middle group: Ingest & Core -->
  <rect x="440" y="120" width="400" height="520" class="group"/>
  <text x="460" y="150" class="label">Ingest & MCP4H Core</text>
  <text x="460" y="175" class="small">Adapters + Normalization + Schema</text>

  <rect x="460" y="200" width="360" height="64" class="node"/>
  <text x="480" y="238" class="label">Ingest adapters</text>
  <text x="480" y="262" class="small">SimHub, SDKs, device APIs</text>

  <rect x="460" y="290" width="360" height="64" class="node"/>
  <text x="480" y="328" class="label">Normalization</text>
  <text x="480" y="352" class="small">units, frames, timestamps</text>

  <rect x="460" y="380" width="360" height="64" class="node"/>
  <text x="480" y="418" class="label">MCP4H Schema</text>
  <text x="480" y="442" class="small">header/signal/context + confidence</text>

  <rect x="460" y="470" width="360" height="64" class="node"/>
  <text x="480" y="508" class="label">Message Bus / API</text>
  <text x="480" y="532" class="small">subscribe, record/replay, routes</text>

  <!-- Right group: Outputs -->
  <rect x="880" y="120" width="360" height="520" class="group"/>
  <text x="900" y="150" class="label">Outputs</text>
  <text x="900" y="175" class="small">Actuation, analysis, assistants</text>

  <rect x="900" y="200" width="320" height="64" class="node"/>
  <text x="920" y="238" class="label">Arduino / DIY Devices</text>
  <text x="920" y="262" class="small">windsim, flag lights, motion</text>

  <rect x="900" y="290" width="320" height="64" class="node"/>
  <text x="920" y="328" class="label">OEM Peripherals</text>
  <text x="920" y="352" class="small">wheels, pedals, haptics</text>

  <rect x="900" y="380" width="320" height="64" class="node"/>
  <text x="920" y="418" class="label">Analytics / Recorder</text>
  <text x="920" y="442" class="small">QA, esports, research</text>

  <rect x="900" y="470" width="320" height="64" class="node"/>
  <text x="920" y="508" class="label">AI / Assistant</text>
  <text x="920" y="532" class="small">copilot, accessibility</text>

  <!-- Arrows from inputs to adapters -->
  <path class="arrow" d="M 380 232 L 460 232" />
  <path class="arrow" d="M 380 322 L 460 322" />
  <path class="arrow" d="M 380 412 L 460 412" />
  <path class="arrow" d="M 380 502 L 460 502" />

  <!-- Pipeline arrows inside core -->
  <path class="arrow" d="M 820 232 L 880 232" />
  <path class="arrow" d="M 820 322 L 880 322" />
  <path class="arrow" d="M 820 412 L 880 412" />
  <path class="arrow" d="M 820 502 L 880 502" />

  <!-- Vertical arrows inside middle group -->
  <path class="arrow" d="M 640 264 L 640 290" />
  <path class="arrow" d="M 640 354 L 640 380" />
  <path class="arrow" d="M 640 444 L 640 470" />

  <!-- Legend -->
  <rect x="40" y="660" width="1200" height="40" fill="#ffffff" stroke="#e5e7eb" rx="10"/>
  <text x="60" y="686" class="small">MCP4H Core duties: normalize units/frames, time-sync, attach confidence & provenance, emit schema-compliant messages over a bus/API for downstream consumers.</text>
</svg>
